## C 問題文
- 下記の様に定義したテーブルがあります。ジャンルごとのitems.priceの平均値とジャンル名を取得したいと思っています
- どの様なクエリを発行するべきでしょうか？理由もつけて回答してください
- idカラム以外はインデックスを貼っていません。もし貼っておいた方が良いインデックスがあれば教えてください。こちらも理由をつけて回答してください

### itemsテーブル
|カラム名|型|備考|
|:----|:----|:----|
|id|int|primary keyとして設定済み|
|name|varchar(128)|apple / potato / coke などの文字列が入る|
|price|int|98 / 150 / 350 などの数値が入る|
|genre_id|int|genresテーブルのidを参照して紐づけている|

### genresテーブル
|カラム名|型|備考|
|:----|:----|:----|
|id|int|primary keyとして設定済み|
|name|varchar(128)|fruit / vegetable / drink などの文字列が入る|
　　
　　
## C 回答
>下記の様に定義したテーブルがあります。ジャンルごとのitems.priceの平均値とジャンル名を取得したいと思っています
> どの様なクエリを発行するべきでしょうか？理由もつけて回答してください
### クエリ
```SQL
SELECT
    g.name AS genre_name,
    AVG(i.price) AS average_price
FROM 
    items AS i JOIN genres AS g ON i.genre_id = g.id
GROUP BY
    g.name
;
```
### 理由
ジャンルごとの価格の平均値を求めるためにはitemsテーブルとgenresテーブルを結合する必要があるため、FROM句でJOINしています。また、GROUP BY句を使用してジャンルごとに結果をグループ化することで各ジャンルの平均価格を取得することができます。

> idカラム以外はインデックスを貼っていません。もし貼っておいた方が良いインデックスがあれば教えてください。こちらも理由をつけて回答してください
### カラムおよび理由
- itemsテーブルにおけるgenre_id
    - 結合のキーになるカラムであるため、負荷がかかりやすい「結合」のパフォーマンスが向上するというのと、ジャンルという性質上更新されづらく、インデックス化によるデメリットも小さいため。
- genresテーブルにおけるname
    - 性質上ジャンル名で検索やフィルタリングをする機会が多いため、インデックス化することでパフォーマンスが向上するということと、前述の通りデメリットも少ないため。
